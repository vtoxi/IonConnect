<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IonConnect Setup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .spinner { border: 2px solid #334155; border-top-color: #3b82f6; border-radius: 50%; width: 20px; height: 20px; animation: spin 0.6s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .fade-in { animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .network-item { cursor: pointer; padding: 12px; border-radius: 8px; transition: all 0.2s; }
        .network-item:hover { background: #1e293b; }
        .badge { padding: 4px 12px; border-radius: 16px; font-size: 12px; font-weight: 600; }
        .badge-success { background: #10b981; color: white; }
        .badge-warning { background: #f59e0b; color: white; }
        .badge-error { background: #ef4444; color: white; }
        .panel { background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 20px; }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">
    <header class="sticky top-0 bg-slate-800 border-b border-slate-700 p-4 z-10">
        <div class="container mx-auto flex justify-between items-center max-w-2xl">
            <h1 class="text-xl font-semibold">üîå IonConnect</h1>
            <span id="status-badge" class="badge badge-warning">Disconnected</span>
        </div>
    </header>

    <main class="container mx-auto p-4 max-w-2xl">
        <!-- Status Panel -->
        <div id="status-panel" class="panel mb-6 fade-in">
            <h2 class="text-lg font-semibold mb-3">Connection Status</h2>
            <div id="status-content" class="text-slate-400">
                <p>Ready to configure WiFi</p>
            </div>
        </div>

        <!-- WiFi Scanner -->
        <div class="panel mb-6 fade-in">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-lg font-semibold">Available Networks</h2>
                <button id="scan-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition">
                    üì° Scan
                </button>
            </div>
            <div id="networks-list" class="text-slate-400">
                <p>Click Scan to find available networks</p>
            </div>
        </div>

        <!-- Configuration Form -->
        <div class="panel mb-6 fade-in">
            <h2 class="text-lg font-semibold mb-3">Configuration</h2>
            <form id="config-form" class="space-y-4">
                <!-- Dynamically generated from schema -->
            </form>
            <div class="flex gap-2 mt-4">
                <button type="button" id="save-btn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg flex-1 transition">
                    üíæ Save & Connect
                </button>
                <button type="button" id="clear-btn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition">
                    üóëÔ∏è Clear
                </button>
            </div>
        </div>

        <!-- Diagnostics Panel (Collapsible) -->
        <div class="panel mb-6 fade-in">
            <button class="flex justify-between items-center w-full" id="diag-toggle">
                <h2 class="text-lg font-semibold">Diagnostics</h2>
                <span id="diag-arrow">‚ñº</span>
            </button>
            <div id="diag-content" class="hidden mt-3 text-sm text-slate-300">
                <!-- Health metrics -->
            </div>
        </div>

        <!-- Backup/Restore -->
        <div class="panel fade-in">
            <h2 class="text-lg font-semibold mb-3">Backup & Restore</h2>
            <div class="flex gap-2">
                <button id="export-btn" class="bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg flex-1 transition">
                    üì• Export Config
                </button>
                <button id="import-btn" class="bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg flex-1 transition">
                    üì§ Import Config
                </button>
            </div>
            <input type="file" id="import-file" class="hidden" accept=".json">
        </div>
    </main>

    <footer class="text-center text-slate-400 text-sm p-4 mt-8">
        IonConnect v1.0 | <a href="/update" class="text-blue-400 hover:text-blue-300">OTA Update</a>
    </footer>

    <div id="toast-container" class="fixed bottom-4 right-4 space-y-2"></div>

    <script src="/script.js"></script>
</body>
</html>

